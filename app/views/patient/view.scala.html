@(patient: Patient, obsForm: Form[ObservationFormOutput])
@import helper._

@main("Patient: " + patient.name) {
    <h1>Patient: @patient.name</h1>

    @helper.form(routes.PatientApp.submit(patient.id), 'class -> "well form-horizontal") {
        <ol>
        @patient.observations.zipWithIndex.map {case(ob, index) =>
            <li><div>
                @inputText(obsForm("entry[%s]".format(index)), '_label -> "Entry")
                <ul>@ob.items.map { item =>
                <li>@item.entry (@item.date)</li>
            }</ul>
            </div>
            </li>
        }
        </ol>

    <ul><li>@inputText(obsForm("entry[%s]".format(patient.observations.length + 1)), '_label -> "Entry")</li></ul>

    @textarea(obsForm("assessment"), '_label -> "Assessment")
        <ul>
        @patient.assessments.map {ass =>
                        <li>(@ass.date) @ass.text</li>
                }
        </ul>
        <div class="controls">
            <input type="submit" value="Create New">
        </div>
    }
}